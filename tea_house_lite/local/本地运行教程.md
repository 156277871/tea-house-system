# 🚀 本地运行部署教程

**无需任何账号，无需外网，数据永久保存！**

---

## 💡 适用场景

- ✅ 只在一台电脑上使用
- ✅ 不想注册任何账号
- ✅ 不想进行实名认证
- ✅ 数据隐私要求高
- ✅ 网络环境受限

---

## 📋 准备工作

### 检查您的电脑

**Windows 用户：**
- Windows 7 或更高版本
- 大约 200MB 可用磁盘空间
- 管理员权限（安装软件需要）

**Mac 用户：**
- macOS 10.12 或更高版本
- 大约 200MB 可用磁盘空间

**Linux 用户：**
- 任意主流发行版（Ubuntu、CentOS 等）
- 大约 200MB 可用磁盘空间

---

## 📥 第一步：下载部署包

### 1.1 下载文件
从对象存储下载部署包：
```
[下载链接 - 稍后提供]
```

### 1.2 解压文件
- **Windows**: 右键点击文件 → "解压到当前文件夹"
- **Mac**: 双击文件即可自动解压
- **Linux**: 使用命令 `tar -xzf 文件名.tar.gz`

解压后得到以下文件：
- `启动系统.bat` - Windows 启动脚本
- `启动系统.sh` - Linux/Mac 启动脚本
- `app.py` - 主程序
- `requirements.txt` - 依赖包列表

---

## 🐍 第二步：安装 Python（如果还没有）

### 如何检查是否已安装 Python？

**Windows：**
1. 按 `Win + R` 键
2. 输入 `cmd`，回车
3. 输入 `python --version`
4. 如果显示版本号（如 Python 3.10.x），说明已安装
5. 如果显示"不是内部或外部命令"，说明需要安装

**Mac/Linux：**
1. 打开终端
2. 输入 `python3 --version`
3. 如果显示版本号，说明已安装
4. 如果显示"command not found"，说明需要安装

---

### 2.1 Windows 用户安装 Python

1. **下载 Python**
   - 访问：https://www.python.org/downloads/
   - 点击 "Download Python 3.10.x"（或 3.11.x）
   - 下载 Windows installer

2. **安装 Python**
   - 双击下载的安装程序
   - **重要！** 勾选 "Add Python to PATH"
   - 点击 "Install Now"
   - 等待安装完成（约2-5分钟）
   - 点击 "Close"

3. **验证安装**
   - 按 `Win + R` 键
   - 输入 `cmd`，回车
   - 输入 `python --version`
   - 显示版本号即成功

---

### 2.2 Mac 用户安装 Python

**方法一：使用 Homebrew（推荐）**

1. 打开终端
2. 如果没有 Homebrew，先安装：
   ```bash
   /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
   ```

3. 安装 Python：
   ```bash
   brew install python3
   ```

**方法二：下载安装包**

1. 访问：https://www.python.org/downloads/macos/
2. 下载 macOS installer
3. 双击安装包，按照提示安装

---

### 2.3 Linux 用户安装 Python

**Ubuntu/Debian：**
```bash
sudo apt update
sudo apt install python3 python3-pip
```

**CentOS/RHEL：**
```bash
sudo yum install python3 python3-pip
```

**Fedora：**
```bash
sudo dnf install python3 python3-pip
```

---

## ▶️ 第三步：启动系统

### 3.1 Windows 用户

1. 找到解压后的文件夹
2. 双击 `启动系统.bat`
3. 等待脚本执行：
   - 检查 Python 环境
   - 安装依赖包（首次需要2-5分钟）
   - 自动启动系统
4. 系统会自动在浏览器打开
5. 如果浏览器没有自动打开，访问：http://localhost:8501

### 3.2 Mac 用户

1. 打开终端
2. 使用 `cd` 命令进入解压后的文件夹：
   ```bash
   cd /path/to/folder
   ```
3. 运行启动脚本：
   ```bash
   ./启动系统.sh
   ```
4. 等待脚本执行
5. 系统会自动在浏览器打开

### 3.3 Linux 用户

1. 打开终端
2. 使用 `cd` 命令进入解压后的文件夹：
   ```bash
   cd /path/to/folder
   ```
3. 运行启动脚本：
   ```bash
   ./启动系统.sh
   ```
4. 等待脚本执行
5. 系统会自动在浏览器打开

---

## 🎯 第四步：开始使用

### 初始化数据

按照以下顺序创建基础数据：

**步骤1：创建门店**
- 点击左侧菜单 **"🏪 门店管理"**
- 切换到 **"新增门店"** 标签
- 填写：
  - 门店名称：例如"北京朝阳店"
  - 门店编码：例如"BJ001"
  - 地址、电话（选填）
- 点击 **"创建"**

**步骤2：创建商品**
- 点击左侧菜单 **"🛍️ 商品管理"**
- 切换到 **"新增商品"** 标签
- 填写：
  - 商品名称：例如"龙井茶"
  - 商品编码：例如"P001"
  - 分类：选择（茶叶/茶具/点心/饮品）
  - 单价：例如 128
  - 单位：例如 "盒"
- 点击 **"创建"**

**步骤3：创建员工**
- 点击左侧菜单 **"👥 员工管理"**
- 切换到 **"新增员工"** 标签
- 填写：
  - 姓名：例如"张三"
  - 电话：例如"13800138000"
  - 职位：选择（店长/店员/收银员）
  - 所属门店：选择刚才创建的门店
- 点击 **"创建"**

**步骤4：创建会员**
- 点击左侧菜单 **"💎 会员管理"**
- 切换到 **"新增会员"** 标签
- 填写：
  - 姓名：例如"李四"
  - 电话：例如"13900139000"
- 点击 **"创建"**

**步骤5：库存入库**
- 点击左侧菜单 **"📦 库存管理"**
- 切换到 **"库存入库"** 标签
- 选择门店和商品
- 输入入库数量
- 点击 **"入库"**

**步骤6：创建订单**
- 点击左侧菜单 **"📝 订单管理"**
- 切换到 **"创建订单"** 标签
- 选择门店、支付方式、商品和数量
- 点击 **"创建"**

---

## ⚙️ 日常使用

### 启动系统

每次使用前，双击 `启动系统.bat`（Windows）或运行 `./启动系统.sh`（Mac/Linux）

### 停止系统

- 在命令行窗口按 `Ctrl + C`
- 或者直接关闭命令行窗口

### 数据存储位置

- Windows：`C:\Users\您的用户名\.streamlit\tea_house.db`
- Mac/Linux：`~/.streamlit/tea_house.db`

数据保存在 SQLite 数据库中，**永久保存**，不会丢失。

---

## ⚠️ 重要提示

### 关于数据安全
- 数据保存在您自己的电脑上，非常安全
- 建议定期备份数据库文件
- 数据库文件位置见上方

### 关于访问限制
- 本地运行只能在安装的电脑上访问
- 其他电脑无法直接访问
- 如需多人访问，考虑使用 ModelScope 部署

### 关于网络
- 本地运行不需要外网
- 首次安装依赖包需要联网
- 之后可以离线使用

---

## 🆘 常见问题

### Q1: 双击启动脚本没有反应？
**A:**
- Windows：右键 → "以管理员身份运行"
- Mac/Linux：确保脚本有执行权限：`chmod +x 启动系统.sh`

### Q2: 提示"未检测到 Python"？
**A:**
- 检查是否安装了 Python
- Windows：安装时勾选了 "Add Python to PATH" 吗？
- Mac/Linux：使用 `which python3` 检查路径

### Q3: 依赖包安装失败？
**A:**
- 检查网络连接
- Windows：尝试使用国内镜像源：
  ```bash
  pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
  ```
- Mac/Linux：使用国内镜像源：
  ```bash
  pip3 install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
  ```

### Q4: 浏览器没有自动打开？
**A:**
- 手动访问：http://localhost:8501
- 确保 8501 端口没有被占用

### Q5: 系统启动很慢？
**A:**
- 首次启动需要初始化数据库，等待1-2分钟
- 之后的启动会很快

### Q6: 如何备份数据？
**A:**
- 复制数据库文件：`tea_house.db`
- Windows：`C:\Users\您的用户名\.streamlit\tea_house.db`
- Mac/Linux：`~/.streamlit/tea_house.db`

### Q7: 如何恢复数据？
**A:**
- 停止系统
- 用备份的数据库文件替换原文件
- 重新启动系统

### Q8: 数据会丢失吗？
**A:**
- 不会！数据永久保存在您的电脑上
- 只要您不删除数据库文件，数据一直在

---

## 🎊 恭喜！

您已经成功在本地运行茶楼管理系统！

现在就可以开始使用了！🎉

**访问地址：** http://localhost:8501
